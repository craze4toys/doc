= Comment écrire du code non-ASCII

Toutes les chaînes de caractères passées aux fonctions GTK+ doivent-être impérativement au format UTF-8.
Evidemment, ceci vaut également pour Ruby-GNOME2.

Vous écrivez peut-être vos programmes Ruby en utilisant une locale et un jeu de caractères n'étant pas nécessairement au format UTF-8.

Dans ce cas, vous vous demandez peut-être comment écrire des programmes avec Ruby-GNOME2.

Voici quelques options:

== 1 Ecrivez vos programmes au format UTF-8
C'est la solution la plus facile si vous utilisez un éditeur qui supporte le format UTF-8.

Définir ((*$KCODE = 'u'*)) au début de votre programme peut aider:

 $KCODE = 'u'
 require 'gtk2'
 
 ...

Vous pouvez également obtenir le même résultat en utilisant l'option -K de l'interpreteur Ruby.

== 2 Ecrivez votre programme avec votre jeu de caractères, et convertissez-le avec iconv
Ecrivez votre programme dans votre éditeur favori, et sauvegardez-le dans un fichier dont le format n'est pas compatible UTF-8.

Ensuite, utilisez iconv pour la conversion:

 iconv -f <your charset> -t utf-8 foo.rb |ruby -
 iconv -f euc-jp -t utf-8 foo.rb |ruby -

Pratiquement, ça revient exactement à la première méthode. 

== 3 Utilisez GLib.convert pour convertir chaque chaîne de caractères
GLib.convert convertit une chaîne d'un jeu de caractères à un autre.

 require 'gtk2'
 
 # Syntaxe: GLib.convert(chaine, format_destination, format_source)
 Gtk::Button.new(GLib.convert("RYOUKAI", "utf-8", "euc-jp"))  
  
Cette méthode n'est pas recommandée pour des textes statiques.  En général, vous ne devriez utiliser GLib.convert que lorsque vous capturez du texte non-ascii/non-UTF8 de fichiers ou du réseau.

== 4 ((<Ruby-GetText|URL:http://ponx.s5.xrea.com/hiki/ruby-gettext.html>))
Les solutions citées jusqu'à présent ne supportent pas il8n (L10n).  Ceci ne devrait pas vous poser de problèmes si vous distribuez localement (dans votre pays même) vos programmes.
Mais si vous comptez distribuer vos programmes dans le monde entier, vous devrez supporter i18n (L10n). 

((<Le paquetage Ruby-GetText|URL:http://ponx.s5.xrea.com/hiki/ruby-gettext.html>)) est une solution qui automatise le remplacement des chaînes en anglais vers un résultat dans la langue locale.  Il est également compatible avec GNU gettext.

Essayez-le si vous êtes intéressé.

== Modifications
:2003-07-08 Evan Martin 
 Correction de l'anglais
:2003-07-08 Masao Mutoh
 Première version

Traduction de la page anglaise par Laurent Sansonetti.