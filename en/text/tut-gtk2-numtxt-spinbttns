= Numeric/Text Data Entry
{{link "tut-gtk2-numtxt-entry", "tut-gtk2-numtxt", "tut-gtk", "tut-gtk2-numtxt-hvscales"}}

== Spin Buttons
{{br}}
{{image_right("numtxt-spinbttns.png")}}
{{br}}

Gtk::SpinButton widget is a number selection widget that can handle either integers or floating point numbers. It is derived from from Gtk::Entry widget, so it inherits all its functionality and signals. Though initially not really necessary, to understand spin buttons completely one should get also familiar with another class, namely Gtk::Adjustment. For instance in the following example we do not deal directly with Gtk::Adjustment class at all. Let's look at the program and try to understand it. Later we will dive into this parallel class, so you will get an idea how the two are related.

 #!/usr/bin/env ruby

 require 'gtk2'

 window = Gtk::Window.new(Gtk::Window::TOPLEVEL)
 window.set_title  "Spin Buttons"
 window.border_width = 10
 window.signal_connect('delete_event') { Gtk.main_quit }
 window.set_size_request(250, -1)

                            # min, max,  step
 integer = Gtk::SpinButton.new(0.0, 10.0, 1.0)
 float   = Gtk::SpinButton.new(0.0, 1.0,  0.1)

 vbox = Gtk::VBox.new(false, 5)
 vbox.pack_start(integer, false, true, 0)
 vbox.pack_start(float,   false, true, 0)

 window.add(vbox)
 window.show_all
 Gtk.main

If you have tried out the above example you've seen that numbers can can be selected by incrementing or decrementing with the up and down arrows. It is still possible to enter a number with the keyboard, but the value is rounded to the nearest acceptable value when it is out of range.

{{image_right("numtxt-spinbttns-a.png")}}

The following example is the the same as above only this time it is done with the adjustment. I have also changed the "step" increment for floating-point number scale to 0.01. The main difference when using adjustment however is in the behaviour not immediately apparent. First you can specify the initial value for the scale, and second the "Page Up/Down" keys work with a page increment value which makes sense for larger ranges. 

 #!/usr/bin/env ruby
 require 'gtk2'

 window = Gtk::Window.new(Gtk::Window::TOPLEVEL)
 window.set_title  "Spin Buttons"
 window.border_width = 10
 window.signal_connect('delete_event') { Gtk.main_quit }
 window.set_size_request(250, -1)

 # create two adjustments
                             # value min, max, step  pg-incr pg-size
 integer = Gtk::Adjustment.new(5.0, 0.0, 10.0, 1.0,  2.0,    2.0)
 float   = Gtk::Adjustment.new(0.5, 0.0, 1.0,  0.01, 0.5,    0.5)

 spin_int   = Gtk::SpinButton.new(integer, 1.0, 1)
 spin_float = Gtk::SpinButton.new(float,   0.01, 2)

 vbox = Gtk::VBox.new(false, 5)
 vbox.pack_start(spin_int,   false, true, 0)
 vbox.pack_start(spin_float, false, true, 0)

 window.add(vbox)
 window.show_all
 Gtk.main


=== Adjustments

Gtk::Adjustment is one of the few classes in GTK+ that is not a Widget, because it is derived directly from Gtk::Object. It is used in several widgets such as view ports, widgets derived from Gtk::Range as well as in spin buttons.

New adjustments are initialized with six parameters:

* initial value
* lower range
* upper range
* step increment
* page increment
* page size

There are also two signals provided by this class

* changed  - emitted when one or more properties except the value property have changed.
* value-changed - emitted only when value property is altered.
