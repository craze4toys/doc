= Funções de Dados de Célula
{{link "tut-treeview-renderer-attributes", "tut-treeview-renderer", "tut-treeview", "tut-treeview-renderer-types"}}

Uma função de dados de célula é um bloco de código que é chamado para um renderizador de célula específico para cada linha antes que a linha seja renderizada. Ele lhe dá controle máximo sobre o que exatamente será renderizado, como você pode configurar as propriedades de renderizador de célula exatamente como deseja. Lembre-se de não configurar apenas a propriedade se você a quer ativa, mas também de desconfigurá-la se ela não deve estar ativa (e ela pode ter sido ativada na linha anterior).

Funções de dados de célula são frequentemente se você quer maior controle sobre o que deve ser mostrado, ou se a maneira padrão de mostrar algo não é exatamente como você deseja. Um caso pode ser os números de pontos flutuantes. Se você quer números de pontos flutuantes para serem mostrados de uma certa maneira, digamos, com apenas um dígito após a vírgula, então você precisa usar uma função de dados de célula. Use Gtk::TreeViewColumn#set_cell_data_func para configurar uma função de dados de célula para um renderizador de célula em particular. Eis um exemplo:

  liststore = Gtk::ListStore.new(String, Float)

  renderer = Gtk::CellRendererText.new

  col = Gtk::TreeViewColumn.new("Idade", renderer)

  col.set_cell_data_func(renderer) do |col, renderer, model, iter|
    # mostra a idade com apenas um dígito 
    renderer.text = sprintf("%.1f", iter[2])
    # mostra a célula em vermelho se a idade for abaixo de 18
    if iter[2] < 18
      renderer.background = "red"
    else
      renderer.background = nil
    end
  end